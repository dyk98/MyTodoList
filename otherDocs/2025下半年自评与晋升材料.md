# 2025 下半年自评与晋升材料

## 一、基本信息

- **职级**：高级工程师
- **评估周期**：2025 下半年

---

## 二、工作列表汇总

### 已完成工作

#### AgentDriver 多代理编排系统

- Agent 调研：Qwen-Code、Plandex、GPT-Engineer
- 对齐 Agent Driver 的思路，完成初版架构设计
- 完成 agentDriver 项目初始化，使用 node22 + tsx + tsup 替换项目原有基建并修改 tsconfig
- 定义场景和场景集合的数据结构，定义场景信息如何在 Driver 中流转
- AgentDriver 仓库项目创建和初始化架构
- Qwen SystemPrompt 动态替换工具
- qwen hardcode 迁出，并升级至最新版本
- 拆分 qwen-code GUI 与逻辑层：自研 qwen/AgentRuntime，绕开 CLI，直接以编程方式装载 qwen-code 配置、MCP 扩展、鉴权与流式回调
- 场景配置：完成整个场景和场景集合的架构，将场景拆分为人设、目标、知识、可用工具、yolo、对话轨迹、输出形式
- 会话化 Driver：实现内存 Session（含超时回收）、逐场景状态管理、动态环境注入
- 多轮对话场景串联机制：yolo: false 场景停留等待用户输入，yolo: true 自动完成并切换
- YOLO 模式联动：场景配置的 yolo 标记映射到 agent 的 yolo 模式
- Prompt 结果工具标准化：抽出 record_prompt_result 通用实现
- Prompt 构造增强：buildScenePrompt 组合场景静态 userContext、动态背景、格式约束
- HTTP 接口：POST /send 支持 sessionId 续会、sceneGroupId 首次必填
- 支持直接函数注册 Tools 不通过 MCP HTTP 的方式
- 场景接入 Handlebars
- 支持 excludeTools
- WriteFile 迁出
- 项目支持 PM2 启动，发布上线
- 分别跑通三个场景：需求澄清、样式美化、项目创建
- 串联跑通完整场景集合
- 根据允许使用的 Tools 列表自动补充相关的使用示例
- 优化 toolcall 报错提醒
- 优化单一场景持续对话的信息传递问题
- 优化场景切换时的信息传递问题
- 数据上报对话轨迹
- 支持通过 sessionId 来决定不同的工作空间
- 支持不通过 MCP 连接，直接继承写好的基类拉取 MCP 的 tool
- 修复构建问题和打包后运行问题，上线
- scene 场景的所有配置都支持 Handlebars 语法
- 支持传入 handlers 参数用来获取 qwen 内部执行信息
- 支持传入 chatHistory 作为前置的对话
- 支持 userContext 替换
- 支持隐藏 .qwen 下的内容
- 跑通 GLM4.6、deepseek3.2、MiniMax M2
- 支持运行时将一些数据注入场景中供 Handlebars 获取
- 系统在开始会话后锁定工作区
- 动态替换虚拟 workspace 文件到真正的 workspace 中
- 根据场景配置动态注入静态资源
- 修复场景没有执行完成 LLM 异常返回的问题
- 支持接口传入模型请求地址
- 支持打包成镜像部署到 zhiwei 上
- 使用 TDesign 组件到最终代码生成中
- 接入 codex/claude-code 调研
- 支持传入参数设置 max_token
- 培训教育产品如何配置场景
- 上线 zhiwei
- 支持分场景使用不同的模型
- 支持静态资源映射复制
- 支持场景完成后会话不失效，可继续持续对话
- 新增标识用来标志完成了项目的智能创建
- 支持自动启动容器运行任务，支持 zhiwei 上批量运行验证
- 优化场景切换逻辑，赞同、拒绝、中性
- 统一场景优化方法论
- 所有 .qwen 标识都替换成 .devtools
- 支持文生图 tool，支持 toolcall 的时候自动获取 ctx 中的内容
- 支持设计师的新版样式美化方案，并进行验证
- 需求澄清 Prompt 更新
- 修复 npm i 之后 qwen 的报错问题
- 升级 qwen-code（模型配置写入 setting.json、system.md 配置方式变更、日志修复）
- 修复 qwen 运行时不同实例的问题，统计 Token 消耗以及每次请求的时间
- 解决 WCC crash 问题，在子进程中执行 wcc wcsc
- logs 塞入 .devtools 中
- 场景、场景集的配置上线七彩石（数据迁移、本地数据兜底、加密七彩石密钥）
- 拆分 userConfirm 和 yolo
- 教育场景修复（日志聚合失败、每次发送两条消息）

#### Build-Server 编译服务

- 接入 Build-Server 支持小程序 TS、Less、SCSS 项目编写及单文件校验
  - wxml、wxss、json 格式校验
  - 支持 wcc 在 linux 上构建
- 支持 js 校验
- 修复 wcc 在镜像中随机出现异常退出问题（-Oz 优化问题，降级为 -O1）
- build-server 架构重新设计
  - 设计方案
  - 改造进程管理
  - 改造 task 链路（FileTask、Task、addSubTask）
- build-server 分享
- build-server 支持主包编译
  - pageframe 迁移完成
  - 跑通新进程调度，mock 请求到 pageframe
  - pageframe addSubTask 到 baseFileCompile 最终完成任务返回
  - 完成完整 pageframe 联调（全量同步改异步、引入 wcc）
  - 新缓存（写入和读取携带 project_id、接入工具缓存清理逻辑）
- build-server 优化最大耗时环节 OT（优化 ot 请求，合并 exist stat readFile）
- 支持 getAppConfig Task

#### 智能创建与样式美化

- 设计规范初版产出
- 接入智勇平台，规模化验证 MCP 效果
- 优化 Qwen-Code Prompt，改造成中文以及接入杨涛的 Prompt
- 解决生成出来项目结构缺失问题
- 完整智能创建 v1
  - 编写开发者工具通用需求澄清场景
- 批量跑出需求澄清的结果用于给产品分析
- 发布 npm 包用来给产品体验需求澄清 @tencent/devtools-agent
- 需求澄清支持脚本批量生成
- 完成样式美化工作
  - 编写样式美化 agent
  - 编写 Tools 来获取样式信息
  - 主题色样式描述（基准描述、腾讯蓝 TDesign、节日红）
  - 布局样式描述（腾讯小程序布局 TDesign、现代工具类布局）
  - 验证效果并对比
  - 定义 DesignToken 标准
- 需求澄清携带具体的页面图片
- 提供 icon 库

#### 教育场景

- Driver 接入 zhiwei 支持单独调用
- waitingForUserConfirm 时提供确认、取消、发送建议按钮
- 默认选择最新镜像
- 场景名加描述
- 教育场景开发
  - 自由创作智能创建
  - 自由创作二次修改
  - 讲解知识
  - 回答问题
  - 讨论方案
  - 教我写代码
  - 帮我写代码

#### 多端与工具维护

- 文件生成都在当前文件夹下，不创建新文件夹
- 多端下载音频文件播放二倍速设置问题
- iOS 卡顿问题反馈
- 调用 OpenAI 接口时存储对应信息、对话轨迹
- 支持杨涛 Agent 接入评测
- 修复工具服务端口无法正常使用
- 对齐劫持 codebuddy 对话轨迹方案
- 跑通 webide 构建报错自动修复流程
- Windows，Skyline 路由，多次跳转后，跳 Skyline 会 Crash
- 工具值班（登录扫码问题、工具项目打开后无法点击、工具无法正常编译）
- 聊天工具获取成员信息无法正常展示昵称和头像
- 修复 ios 构建 CFBundleURLSchemes 结构问题
- 修复 revokePrivacy 无效问题
- 再优化一遍蓝牙和日历相关模块
- 修复 ios13.x 无法使用 chooseMedia 的问题
- 多端 chooseMedia 全链路加日志
- 准备 AI 面试题
- 发布 KM 文章
- 解决 skyline 模式 devtools wxss 颜色反勾选失效问题
- AgentRL 相关（关闭智能诊断、支持通过参数控制失败重试、支持非 stream 模式）

### 未完成工作

- AgentRL 修复非流式 toolcall 问题、关闭模型确认 Loop 循环
- 教育并发优化（模型侧优化、infra 优化）
- AgentDriver 后续规划
  - 七彩石可视化配置、灰度测试、批量对比测试
  - 整体数据采集、分析、优化方案
  - 调研 OpenDevin CodeAct1.0 和 KimiCLI
  - 对话轨迹上报
  - 编写单测
  - zhiwei 展示耗时和 token 消耗
  - 上下文管理增强
  - 支持云开发智能创建
  - 工具支持 tailwind 编译
- build-server 监控上报
- 云开发支持本地运行
- qwen-code memory 机制
- 其他规划项

---

## 三、年度自评（OKR 表格）

### 目标 1：AgentDriver 多代理编排系统

| 目标 | 关键结果 | 完成情况 |
|-----|---------|---------|
| 设计并落地 AgentDriver 多代理编排系统，实现通用 Agent 到专业领域 Agent 的场景化配置，支持端到端部署和远端调用 | 1. 对 qwen-code 进行深度定制化（Prompt 优化、工具改造、流程设计），将小程序编译通过率从 24% 提升至 94%<br>2. 将定制化信息提取为配置化注入，设计 Driver → Adapter → Runtime 架构，解决上游同步困难和未来替换成本高的问题<br>3. 自研 AgentRuntime，绕开 CLI 层以编程方式装载配置，实现场景配置与底层 Agent 解耦<br>4. 实现会话化 Driver，支持多轮对话、场景串联、动态环境注入，支持端到端部署及远端部署调用<br>5. 支持多模型切换（GLM4.6、DeepSeek、MiniMax M2 等），可根据场景灵活选择以平衡质量和并发<br>6. 完成 7 个教育场景开发，配置上线七彩石平台支持产品自主迭代，通过不同场景使用不同模型<br>7. 通过场景拆分能力将原有小程序教育中均耗时 3 分钟的高频高耗场景拆分为平均耗时 30s 的高频低耗场景及平均耗时 3 分钟的低频高耗场景，有效提升并发约 4 倍；对原教育场景进行模型横评替换，在消耗资源、生成效率及质量不变的情况下，提升并发约 2.35 倍，综合提升约 9.4 倍并发<br>8. 上线 zhiwei 评测平台，支持批量任务验证、Driver 体验、AgentRL | 作为项目总负责人，独立完成架构设计和核心功能开发，带领实习生落地工具和教育场景。通过深度定制化将编译通过率从 24% 提升至 94%，并将定制化内容抽象为配置化注入方案。**系统已上线微信开发者工具和小程序教育平台**，同时上线 zhiwei 支持数据集/场景集/镜像版本批量验证，场景配置上线七彩石支持产品实时修改和灰度测试。通过场景拆分和模型横评优化，**综合提升教育场景并发约 9.4 倍**。 |

### 目标 2：Build-Server 编译服务重构

| 目标 | 关键结果                                                                                                                                                                                                                                     | 完成情况 |
|-----|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------|
| 重构 Build-Server 架构，支持完整小程序远端编译，为 AI 能力提供编译校验基础设施 | 1. 完成架构升级，从单文件链式任务升级为支持 appservice、pageframe 等完整编译<br>2. 实现远端完整小程序编译能力，支持以 MCP 方式供 AI 项目使用<br>3. 设计增量编译缓存，实现 AI 生成代码后用户立等可取<br>4. 改造 miniprogram-builder 子模块，将同步 IO 改为异步非阻塞，整个项目使用 PM2 统一进程管理<br>5. 解决 WCC 在 Linux 上因 -Oz 优化导致的 crash 问题 | 完成架构重设计和全部改造工作。**已上线小程序教育平台 WebIDE，实现浏览器+远端编译的完整小程序开发体验**。**为 AgentDriver 提供编译校验基础设施**，通过编译缓存设计使 AI 生成代码后无需重复等待编译。改造 miniprogram-builder 消除阻塞 IO。定位并解决 WCC crash 问题（-Oz 优化在 Linux 下错误优化内存分配代码），通过批量验证脚本完成修复。 |

### 目标 3：智能创建与样式美化方案

| 目标 | 关键结果 | 完成情况 |
|-----|---------|---------|
| 探索并落地智能创建全流程方案，解决用户需求模糊和 AI 生成样式质量差的问题 | 1. 完成需求澄清场景，解决用户不会描述需求和模糊需求导致生成质量差两个问题<br>2. 完成样式美化方案 3 版迭代（TDesign 组件 → 主题配色+布局扩写 → Tailwind 主题）<br>3. 产出设计规范初版，主动与设计师协作优化 | 完成需求澄清场景，产出结构化需求稿便于 AI 生成。样式美化经历 3 版迭代探索，目前三版方案并存，最终方案为在微信开发者工具中装载 Tailwind 编译能力。**已上线微信开发者工具和小程序教育平台**。主动探索方向并找设计师协作产出设计规范。 |

---

## 四、职级晋升重点项目

### 项目名称

AgentDriver 多代理编排系统

### 项目相关人

kavinxiong（实习生）

### 个人贡献与能力体现

**承担角色**：项目负责人

**关键贡献与实际产出**：

1. 对 qwen-code 进行深度定制化（Prompt 优化、工具改造、流程设计），将小程序编译通过率从 24% 提升至 94%
2. 设计 Driver → Adapter → Runtime 三层架构，解决上游同步困难和替换成本高的问题；自研 AgentRuntime 绕开 CLI 层以编程方式装载配置，实现场景配置与底层 Agent 解耦
3. 实现会话化 Driver，支持多轮对话、场景串联、动态环境注入，支持端到端部署及远端调用
4. 通过场景拆分和模型横评，综合提升教育场景并发约 9.4 倍
5. 完成 7 个教育场景开发，配置上线七彩石平台支持产品自主迭代
6. 上线 zhiwei 评测平台，支持批量任务验证、Driver 体验、AgentRL
7. 培养实习生从入职到能独立负责有技术挑战的专项

**展现的专业能力**：

- **架构设计能力**：针对上游同步困难问题，设计三层架构实现配置与实现解耦，具备良好扩展性
- **技术攻坚能力**：攻克场景串联、会话化管理、多模型适配等难点，将编译通过率从 24% 提升至 94%
- **性能优化能力**：通过场景拆分和模型横评，综合提升并发约 9.4 倍
- **项目管理能力**：独立完成需求拆解与进度把控，带领实习生完成子模块落地
- **沟通协调能力**：跨团队协作推动项目落地，推动产品使用七彩石平台实现自主迭代

---

## 五、项目背景补充说明

### AgentDriver 项目背景

1. **起因**：探索通过 coding agent 完成微信小程序的完整开发
2. **选型**：选择 qwen-code 作为基础代码（提供了丰富的 tool 和优秀的工程代码）
3. **初次验证**：编译通过率仅 24%
4. **改造困境**：对 qwen-code 进行改造后通过率提升至 94%，但导致难以通过 git pull 对齐上游代码
5. **架构决策**：担心未来有更强大 agent 出现时替换成本高，提出 Driver 架构方案
6. **设计目标**：
   - 通过场景配置注入将通用 agent 变成专业领域 agent
   - 通过场景集完成业务需求赋能
   - 实现端到端部署及远端调用

### Build-Server 重构背景

1. **原架构问题**：一期设计参考 pluginDriver，以单文件为入口生成链式任务，不适配服务于 Runtime 的生产场景
2. **无法支持**：appservice、pageframe 等无法做同样程度的细化和调度
3. **重构目标**：支持编译全程放置远端

### 智能创建与样式美化背景

1. **需求澄清解决的问题**：
   - 用户不懂怎么讲清楚需求
   - 模糊需求导致 AI 生成产物差强人意
2. **样式美化迭代路径**：
   - v1：支持 AI 通过 TDesign 组件编写项目
   - v2：支持通过主题（配色+布局）扩写需求稿
   - v3：生成多种 tailwind 主题方案

---

## 六、关键数据与成果

| 指标 | 数值/成果 |
|-----|----------|
| AgentDriver 项目周期 | 约 4 个月 |
| 编译通过率提升 | 24% → 94% |
| 教育场景并发提升 | 综合提升约 9.4 倍（场景拆分 4 倍 × 模型横评 2.35 倍） |
| 教育场景数量 | 7 个 |
| 支持模型数量 | 多个（GLM4.6、DeepSeek、MiniMax M2 等） |
| 上线平台 | 微信开发者工具、小程序教育平台、zhiwei 评测平台 |
| 配置平台 | 七彩石（支持实时修改、灰度测试、分场景模型配置） |
| 样式美化迭代版本 | 3 版 |
| 团队培养 | 带领实习生独立承担核心子模块，完成高难度架构设计与落地工作 |

---

## 七、待补充信息

> 以下信息如有需要可后续补充：

- [x] 项目具体时间线（何时开始、何时上线）- 已补充：约 4 个月
- [ ] 更多量化数据（用户数、调用量、性能指标等）
- [ ] 其他协作方的反馈或评价
- [ ] 未来规划的优先级排序
